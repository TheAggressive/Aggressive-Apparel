/* Reference Tailwind for @apply usage, then import utilities only (no reset) */
@reference 'tailwindcss';
@import 'tailwindcss/utilities';

/* Debug overlay colors - globally available */
:root {
	--wp-block-animate-on-scroll-debug-red: rgb(239 68 68);
	--wp-block-animate-on-scroll-debug-yellow: rgb(234 179 8);
	--wp-block-animate-on-scroll-debug-green: rgb(34 197 94);
	--wp-block-animate-on-scroll-debug-red-bg: rgb(239 68 68 / 20%);
	--wp-block-animate-on-scroll-debug-yellow-bg: rgb(234 179 8 / 20%);
	--wp-block-animate-on-scroll-debug-green-bg: rgb(34 197 94 / 20%);
}

/**
 * Animate On Scroll Block Styles
 *
 * Styles for the aggressive-apparel/animate-on-scroll block.
 * Applied to both front-end and editor.
 *
 * Table of Contents:
 * 1. CSS Custom Properties
 * 2. Base Animation Framework
 * 3. Individual Animation Types
 * 4. Animation Sequence Support
 * 5. Reverse Animation States
 * 6. Stagger Animation Support
 * 7. Keyframe Animations
 * 8. Debug Overlays
 */

.wp-block-animate-on-scroll {

	/* CSS Custom Properties */
	--wp-block-animate-on-scroll-animation-duration: 0.6s;
	--wp-block-animate-on-scroll-stagger-delay: 0.1s;
	--wp-block-animate-on-scroll-stagger-index: 0;
	--wp-block-animate-on-scroll-animation-timing: cubic-bezier(0.4, 0, 0.2, 1);
	--wp-block-animate-on-scroll-slide-distance: 50px;
	--wp-block-animate-on-scroll-blur-amount: 20px;
	--wp-block-animate-on-scroll-zoom-in-start: 0.5;
	--wp-block-animate-on-scroll-zoom-out-start: 1.5;
	--wp-block-animate-on-scroll-rotate-angle: 90deg;
	--wp-block-animate-on-scroll-perspective: 1000px;
	--wp-block-animate-on-scroll-bounce-distance: 30px;
	--wp-block-animate-on-scroll-elastic-distance: 50px;

	/* Base Styles */
	display: block;
	will-change: transform, opacity, filter;

	/* Accessibility: Respect prefers-reduced-motion */
	@media (prefers-reduced-motion: reduce) {

		& > * {
			transition: none !important;
			animation: none !important;
			opacity: 1 !important;
			transform: none !important;
			filter: none !important;
		}
	}

	/* Remove margin-top for constrained blocks */
	:root :where(.is-layout-constrained) > & {
		margin-block-start: 0 !important;
	}

	/* ==========================================================================
	   2. BASE ANIMATION FRAMEWORK
	   ========================================================================== */

	/* Base animation setup for all direct children */
	&:not(.has-animation-sequence) > * {
		opacity: 0;
		transition: all
			var(--wp-block-animate-on-scroll-animation-duration)
			var(--wp-block-animate-on-scroll-animation-timing);
		transition-delay: var(--wp-block-animate-on-scroll-initial-delay);
		display: inline-block; /* Allows transforms on inline elements */
	}

	/* Visible state - reset to natural appearance */
	&:not(.has-animation-sequence).is-visible > * {
		opacity: 1;
		transform: none;
		filter: blur(0);
	}

	/* Exiting state - animate back to hidden state */
	&:not(.has-animation-sequence).is-exiting > * {
		opacity: 0;
	}

	/* ==========================================================================
	   5. REVERSE ANIMATION STATES
	   ========================================================================== */

	/* Slide reverse animations */
	&.slide.is-exiting {

		&.up > * {
			opacity: 0;
			transform: translateY(var(--wp-block-animate-on-scroll-slide-distance));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.down > * {
			opacity: 0;
			transform: translateY(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance)));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.left > * {
			opacity: 0;
			transform: translateX(var(--wp-block-animate-on-scroll-slide-distance));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.right > * {
			opacity: 0;
			transform: translateX(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance)));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}
	}

	/* Zoom reverse animations */
	&.zoom.is-exiting {

		&.in > * {
			opacity: 0;
			transform: scale(var(--wp-block-animate-on-scroll-zoom-in-start));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.out > * {
			opacity: 0;
			transform: scale(var(--wp-block-animate-on-scroll-zoom-out-start));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}
	}

	/* Flip reverse animations */
	&.flip.is-exiting {

		&.up > * {
			opacity: 0;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(var(--wp-block-animate-on-scroll-rotate-angle));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.down > * {
			opacity: 0;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle)));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.left > * {
			opacity: 0;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateY(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle)));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.right > * {
			opacity: 0;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateY(var(--wp-block-animate-on-scroll-rotate-angle));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}
	}

	/* Rotate reverse animations */
	&.rotate.is-exiting {

		&.left > * {
			opacity: 0;
			transform: rotate(var(--wp-block-animate-on-scroll-rotate-angle));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		&.right > * {
			opacity: 0;
			transform: rotate(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle)));
			transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}
	}

	/* Blur reverse animations */
	&.blur-in.is-exiting > * {
		opacity: 0;
		filter: blur(var(--wp-block-animate-on-scroll-blur-amount));
		transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
	}

	/* Bounce reverse animations */
	&.bounce.is-exiting > * {
		opacity: 0;
		transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance));
		transition: all var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
	}

	/* ==========================================================================
	   4. ANIMATION SEQUENCE SUPPORT
	   ========================================================================== */

	/* Base sequence setup */
	&.has-animation-sequence {

		> div[data-animate-sequence-type] {
			opacity: 0;
			display: block;
			width: 100%;
			transition: opacity var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				transform var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				filter var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
			transition-delay: var(--wp-block-animate-on-scroll-initial-delay);
		}

		&.is-exiting > div[data-animate-sequence-type] {
			opacity: 0;
			transition: opacity var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				transform var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				filter var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				box-shadow var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				border-width var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing),
				background var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing);
		}

		/* Sequence: Slide */
		> div[data-animate-sequence-type="slide"] {
			transform-origin: center center;
			opacity: 0;

			&[data-animate-sequence-direction="up"] {
				transform: translateY(var(--wp-block-animate-on-scroll-slide-distance));
			}

			&[data-animate-sequence-direction="down"] {
				transform: translateY(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance)));
			}

			&[data-animate-sequence-direction="left"] {
				transform: translateX(var(--wp-block-animate-on-scroll-slide-distance));
			}

			&[data-animate-sequence-direction="right"] {
				transform: translateX(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance)));
			}
		}

		/* Sequence: Zoom */
		> div[data-animate-sequence-type="zoom"] {
			transform-origin: center center;
			opacity: 0;

			&[data-animate-sequence-direction="in"] {
				transform: scale(var(--wp-block-animate-on-scroll-zoom-in-start));
			}

			&[data-animate-sequence-direction="out"] {
				transform: scale(var(--wp-block-animate-on-scroll-zoom-out-start));
			}
		}

		/* Sequence: Flip */
		> div[data-animate-sequence-type="flip"] {
			transform-origin: center center;
			opacity: 0;

			&[data-animate-sequence-direction="up"] {
				transform: perspective(var(--wp-block-animate-on-scroll-perspective))
					rotateX(var(--wp-block-animate-on-scroll-rotate-angle));
			}

			&[data-animate-sequence-direction="down"] {
				transform: perspective(var(--wp-block-animate-on-scroll-perspective))
					rotateX(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle)));
			}

			&[data-animate-sequence-direction="left"] {
				transform: perspective(var(--wp-block-animate-on-scroll-perspective))
					rotateY(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle)));
			}

			&[data-animate-sequence-direction="right"] {
				transform: perspective(var(--wp-block-animate-on-scroll-perspective))
					rotateY(var(--wp-block-animate-on-scroll-rotate-angle));
			}
		}

		/* Sequence: Rotate */
		> div[data-animate-sequence-type="rotate"] {
			transform-origin: center center;
			opacity: 0;

			&[data-animate-sequence-direction="left"] {
				transform: rotate(var(--wp-block-animate-on-scroll-rotate-angle));
			}

			&[data-animate-sequence-direction="right"] {
				transform: rotate(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle)));
			}
		}

		/* Sequence: Blur */
		> div[data-animate-sequence-type="blur-in"] {
			opacity: 0;
			filter: blur(var(--wp-block-animate-on-scroll-blur-amount));
		}

		/* Sequence: Bounce */
		> div[data-animate-sequence-type="bounce"] {
			transform-origin: center center;
			opacity: 0;

			&[data-animate-sequence-direction="standard"],
			&[data-animate-sequence-direction="spring"] {
				transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance));
			}

			&[data-animate-sequence-direction="elastic"] {
				transform: translateY(var(--wp-block-animate-on-scroll-elastic-distance));
			}
		}

		/* Reset all sequence-specific classes when visible */
		&.is-visible > div[data-animate-sequence-type] {
			opacity: 1 !important;
			transform: none !important;
			filter: blur(0) !important;
		}


		/* Sequence: Slide - Final states when visible */
		&.is-visible > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="up"] {
			opacity: 1 !important;
			transform: translate(0, 0) !important;
		}

		&.is-visible > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="down"] {
			opacity: 1 !important;
			transform: translate(0, 0) !important;
		}

		&.is-visible > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="left"] {
			opacity: 1 !important;
			transform: translate(0, 0) !important;
		}

		&.is-visible > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="right"] {
			opacity: 1 !important;
			transform: translate(0, 0) !important;
		}

		/* Sequence: Slide - Reverse states when exiting */
		&.is-exiting > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="up"] {
			opacity: 0 !important;
			transform: translateY(var(--wp-block-animate-on-scroll-slide-distance)) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="down"] {
			opacity: 0 !important;
			transform: translateY(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance))) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="left"] {
			opacity: 0 !important;
			transform: translateX(var(--wp-block-animate-on-scroll-slide-distance)) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="slide"][data-animate-sequence-direction="right"] {
			opacity: 0 !important;
			transform: translateX(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance))) !important;
		}

		/* Sequence: Zoom - Final states when visible */
		&.is-visible > div[data-animate-sequence-type="zoom"][data-animate-sequence-direction="in"] {
			opacity: 1 !important;
			transform: scale(1) !important;
		}

		&.is-visible > div[data-animate-sequence-type="zoom"][data-animate-sequence-direction="out"] {
			opacity: 1 !important;
			transform: scale(1) !important;
		}

		/* Sequence: Zoom - Reverse states when exiting */
		&.is-exiting > div[data-animate-sequence-type="zoom"][data-animate-sequence-direction="in"] {
			opacity: 0 !important;
			transform: scale(var(--wp-block-animate-on-scroll-zoom-in-start)) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="zoom"][data-animate-sequence-direction="out"] {
			opacity: 0 !important;
			transform: scale(var(--wp-block-animate-on-scroll-zoom-out-start)) !important;
		}

		/* Sequence: Flip - Final states when visible */
		&.is-visible > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="up"] {
			opacity: 1 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(0) rotateY(0) !important;
		}

		&.is-visible > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="down"] {
			opacity: 1 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(0) rotateY(0) !important;
		}

		&.is-visible > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="left"] {
			opacity: 1 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(0) rotateY(0) !important;
		}

		&.is-visible > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="right"] {
			opacity: 1 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(0) rotateY(0) !important;
		}

		/* Sequence: Flip - Reverse states when exiting */
		&.is-exiting > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="up"] {
			opacity: 0 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective))
				rotateX(var(--wp-block-animate-on-scroll-rotate-angle)) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="down"] {
			opacity: 0 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective))
				rotateX(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle))) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="left"] {
			opacity: 0 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective))
				rotateY(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle))) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="flip"][data-animate-sequence-direction="right"] {
			opacity: 0 !important;
			transform: perspective(var(--wp-block-animate-on-scroll-perspective))
				rotateY(var(--wp-block-animate-on-scroll-rotate-angle)) !important;
		}

		/* Sequence: Rotate - Final states when visible */
		&.is-visible > div[data-animate-sequence-type="rotate"][data-animate-sequence-direction="left"] {
			opacity: 1 !important;
			transform: rotate(0deg) !important;
		}

		&.is-visible > div[data-animate-sequence-type="rotate"][data-animate-sequence-direction="right"] {
			opacity: 1 !important;
			transform: rotate(0deg) !important;
		}

		/* Sequence: Rotate - Reverse states when exiting */
		&.is-exiting > div[data-animate-sequence-type="rotate"][data-animate-sequence-direction="left"] {
			opacity: 0 !important;
			transform: rotate(var(--wp-block-animate-on-scroll-rotate-angle)) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="rotate"][data-animate-sequence-direction="right"] {
			opacity: 0 !important;
			transform: rotate(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle))) !important;
		}

		/* Sequence: Blur - Final state when visible */
		&.is-visible > div[data-animate-sequence-type="blur-in"] {
			opacity: 1 !important;
			filter: blur(0) !important;
		}

		/* Sequence: Blur - Reverse state when exiting */
		&.is-exiting > div[data-animate-sequence-type="blur-in"] {
			opacity: 0 !important;
			filter: blur(var(--wp-block-animate-on-scroll-blur-amount)) !important;
		}

		/* Sequence: Bounce - Final states when visible */
		&.is-visible > div[data-animate-sequence-type="bounce"][data-animate-sequence-direction="standard"] {
			opacity: 1 !important;
			animation: bounce-in
				var(--wp-block-animate-on-scroll-animation-duration)
				var(--wp-block-animate-on-scroll-animation-timing)
				forwards;
		}

		&.is-visible > div[data-animate-sequence-type="bounce"][data-animate-sequence-direction="elastic"] {
			opacity: 1 !important;
			animation: elastic-in
				var(--wp-block-animate-on-scroll-animation-duration)
				var(--wp-block-animate-on-scroll-animation-timing)
				forwards;
		}

		&.is-visible > div[data-animate-sequence-type="bounce"][data-animate-sequence-direction="spring"] {
			opacity: 1 !important;
			animation: spring-in
				var(--wp-block-animate-on-scroll-animation-duration)
				var(--wp-block-animate-on-scroll-animation-timing)
				forwards;
		}

		/* Sequence: Bounce - Reverse states when exiting */
		&.is-exiting > div[data-animate-sequence-type="bounce"][data-animate-sequence-direction="standard"],
		&.is-exiting > div[data-animate-sequence-type="bounce"][data-animate-sequence-direction="spring"] {
			opacity: 0 !important;
			transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance)) !important;
		}

		&.is-exiting > div[data-animate-sequence-type="bounce"][data-animate-sequence-direction="elastic"] {
			opacity: 0 !important;
			transform: translateY(var(--wp-block-animate-on-scroll-elastic-distance)) !important;
		}






	}

	/* ==========================================================================
	   6. STAGGER ANIMATION SUPPORT
	   ========================================================================== */

	/* Stagger Animation - Combine initial delay with stagger delay */
	&[data-stagger-children="true"] > * {
		transition-delay: calc(
			var(--wp-block-animate-on-scroll-initial-delay) +
			var(--wp-block-animate-on-scroll-stagger-delay, 0s)
		);
	}

	/* Stagger Animation for Sequence Mode - Apply to wrapper divs */
	&.has-animation-sequence[data-stagger-children="true"] > div[data-animate-sequence-type] {
		transition-delay: calc(
			var(--wp-block-animate-on-scroll-initial-delay) +
			var(--wp-block-animate-on-scroll-stagger-delay, 0s)
		);
	}

	/* ==========================================================================
	   3. INDIVIDUAL ANIMATION TYPES
	   ========================================================================== */

	/* Transform origin for all transform-based animations */
	&.slide > *,
	&.zoom > *,
	&.flip > *,
	&.rotate > *,
	&.bounce > * {
		transform-origin: center center;
	}

	/* Slide Animation */
	&.slide {

		&.up > * { transform: translateY(var(--wp-block-animate-on-scroll-slide-distance)); }

		&.down > * { transform: translateY(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance))); }

		&.left > * { transform: translateX(var(--wp-block-animate-on-scroll-slide-distance)); }

		&.right > * { transform: translateX(calc(-1 * var(--wp-block-animate-on-scroll-slide-distance))); }

		&.is-visible > * { transform: translate(0, 0); }
	}

	/* Zoom Animation */
	&.zoom {

		&.in > * { transform: scale(var(--wp-block-animate-on-scroll-zoom-in-start)); }

		&.out > * { transform: scale(var(--wp-block-animate-on-scroll-zoom-out-start)); }

		&.is-visible > * { transform: scale(1); }
	}

	/* Flip Animation */
	&.flip {

		&.up > * { transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(var(--wp-block-animate-on-scroll-rotate-angle)); }

		&.down > * { transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle))); }

		&.left > * { transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateY(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle))); }

		&.right > * { transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateY(var(--wp-block-animate-on-scroll-rotate-angle)); }

		&.is-visible > * { transform: perspective(var(--wp-block-animate-on-scroll-perspective)) rotateX(0) rotateY(0); }
	}

	/* Rotate Animation */
	&.rotate {

		&.left > * { transform: rotate(var(--wp-block-animate-on-scroll-rotate-angle)); }

		&.right > * { transform: rotate(calc(-1 * var(--wp-block-animate-on-scroll-rotate-angle))); }

		&.is-visible > * { transform: rotate(0deg); }
	}

	/* Blur Animation */
	&.blur-in > * { filter: blur(var(--wp-block-animate-on-scroll-blur-amount)); }

	&.blur-in.is-visible > * { filter: blur(0); }

	/* Bounce Animation */
	&.bounce > * {
		transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance));
		opacity: 0;
	}

	&.bounce.standard.is-visible > *,
	&.bounce.is-visible > * {
		animation: bounce-in var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing) forwards;
	}

	&.bounce.elastic > * { transform: translateY(var(--wp-block-animate-on-scroll-elastic-distance)); }

	&.bounce.elastic.is-visible > * {
		animation: elastic-in var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing) forwards;
	}

	&.bounce.spring > * { transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance)); }

	&.bounce.spring.is-visible > * {
		animation: spring-in var(--wp-block-animate-on-scroll-animation-duration) var(--wp-block-animate-on-scroll-animation-timing) forwards;
	}

}

/* ==========================================================================
   7. KEYFRAME ANIMATIONS
   ========================================================================== */

@keyframes bounce-in {

	0% {
		transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance));
		opacity: 0;
	}

	60% {
		transform: translateY(-10px);
		opacity: 1;
	}

	80% {
		transform: translateY(5px);
	}

	100% {
		transform: translateY(0);
		opacity: 1;
	}
}

@keyframes elastic-in {

	0% {
		transform: translateY(var(--wp-block-animate-on-scroll-elastic-distance))
			scaleY(0.8);
		opacity: 0;
	}

	50% {
		transform: translateY(-15px) scaleY(1.1);
		opacity: 0.8;
	}

	70% {
		transform: translateY(8px) scaleY(0.95);
		opacity: 0.9;
	}

	85% {
		transform: translateY(-4px) scaleY(1.02);
		opacity: 0.95;
	}

	100% {
		transform: translateY(0) scaleY(1);
		opacity: 1;
	}
}

@keyframes spring-in {

	0% {
		transform: translateY(var(--wp-block-animate-on-scroll-bounce-distance))
			scale(0.8);
		opacity: 0;
	}

	40% {
		transform: translateY(-20px) scale(1.05);
		opacity: 0.9;
	}

	60% {
		transform: translateY(10px) scale(0.98);
		opacity: 0.95;
	}

	80% {
		transform: translateY(-5px) scale(1.01);
		opacity: 0.98;
	}

	100% {
		transform: translateY(0) scale(1);
		opacity: 1;
	}
}


@keyframes blink-caret {

	0%, 50% {
		opacity: 1;
	}

	51%, 100% {
		opacity: 0;
	}
}






/* ==========================================================================
   8. DEBUG OVERLAYS - Enhanced UI with Glassmorphism
   ========================================================================== */

/* Detection Boundary Overlay - Accurate viewport positioning */
.wp-block-animate-on-scroll-debug-detection-boundary-overlay {
	position: fixed;
	pointer-events: none;
	z-index: 999;
	border: 2px dashed rgb(59 130 246 / 60%);
	background: rgb(59 130 246 / 8%);
	backdrop-filter: blur(4px);
	box-shadow: inset 0 0 20px rgb(59 130 246 / 20%);

	/* Inset is set via JavaScript to match rootMargin values */

	&::after {
		position: absolute;
		left: 50%;
		top: 50%;
		transform: translate(-50%, -50%);
		content: "Detection Boundary";
		background: rgb(59 130 246);
		color: rgb(255 255 255);
		padding: 0.375rem 0.75rem;
		border-radius: 0.375rem;
		font-size: 0.75rem;
		font-weight: 600;
		white-space: nowrap;
		box-shadow: 0 2px 8px rgb(0 0 0 / 20%);
	}
}

/* Debug Container - Element overlay */
[class*="wp-block-animate-on-scroll-debug-container"] {
	position: absolute;
	pointer-events: none;
	z-index: 9999;
	min-width: 1px;
	min-height: 1px;
}

/* Floating Info Panel - Glassmorphism design */
[class*="wp-block-animate-on-scroll-debug-panel"] {
	position: fixed;
	z-index: 10000;
	background: rgb(0 0 0 / 85%);
	backdrop-filter: blur(12px) saturate(180%);
	border: 1px solid rgb(255 255 255 / 10%);
	border-radius: 0.75rem;
	box-shadow: 0 8px 32px rgb(0 0 0 / 30%);
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
	transition: transform 0.2s ease-out, opacity 0.2s ease-out;

	&:hover {
		transform: translateY(-2px);
		box-shadow: 0 12px 40px rgb(0 0 0 / 40%);
	}

	.debug-panel-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0.75rem 1rem;
		border-bottom: 1px solid rgb(255 255 255 / 10%);
	}

	.debug-panel-title {
		font-size: 0.875rem;
		font-weight: 600;
		color: rgb(255 255 255);
		letter-spacing: 0.025em;
	}

	.debug-panel-toggle {
		background: transparent;
		border: none;
		color: rgb(255 255 255 / 70%);
		cursor: pointer;
		padding: 0.25rem 0.5rem;
		border-radius: 0.25rem;
		font-size: 1rem;
		line-height: 1;
		transition: color 0.2s, background-color 0.2s;

		&:hover {
			color: rgb(255 255 255);
			background: rgb(255 255 255 / 10%);
		}
	}

	.debug-panel-content {
		padding: 0.5rem;
	}

	.debug-section {
		margin-bottom: 0.5rem;

		&:last-child {
			margin-bottom: 0;
		}
	}

	.debug-section-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 0.5rem 0.75rem;
		cursor: pointer;
		border-radius: 0.375rem;
		transition: background-color 0.2s;

		&:hover {
			background: rgb(255 255 255 / 5%);
		}

		span {
			font-size: 0.8125rem;
			font-weight: 500;
			color: rgb(255 255 255 / 90%);
		}

		.section-toggle {
			background: transparent;
			border: none;
			color: rgb(255 255 255 / 60%);
			cursor: pointer;
			padding: 0.125rem 0.375rem;
			border-radius: 0.25rem;
			font-size: 0.875rem;
			line-height: 1;
			transition: color 0.2s;

			&:hover {
				color: rgb(255 255 255 / 90%);
			}
		}
	}

	.debug-section-content {
		padding: 0.5rem 0.75rem;
	}

	.debug-metric {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 0.375rem 0;
		font-size: 0.8125rem;

		.metric-label {
			color: rgb(255 255 255 / 70%);
		}

		.metric-value {
			font-weight: 600;
			color: rgb(255 255 255);
			font-variant-numeric: tabular-nums;


			&.direction-down {
				color: rgb(34 197 94);
			}

			&.direction-up {
				color: rgb(251 146 60);
			}

			&.performance-good {
				color: rgb(34 197 94);
			}

			&.performance-lag {
				color: rgb(251 146 60);
			}

			&.performance-jitter {
				color: rgb(234 179 8);
			}

			&		.performance-poor {
			color: rgb(239 68 68);
		}

		.intersection-state-value {
			font-weight: 600;
			padding: 0.125rem 0.375rem;
			border-radius: 0.25rem;
			display: inline-block;

			/* Red: Not intersecting */
			&.intersection-state--not-intersecting {
				background: var(--wp-block-animate-on-scroll-debug-red-bg);
				color: var(--wp-block-animate-on-scroll-debug-red);
			}

			/* Yellow: Entering detection boundary */
			&.intersection-state--entering {
				background: var(--wp-block-animate-on-scroll-debug-yellow-bg);
				color: var(--wp-block-animate-on-scroll-debug-yellow);
			}

			/* Green: Triggered */
			&.intersection-state--triggered {
				background: var(--wp-block-animate-on-scroll-debug-green-bg);
				color: var(--wp-block-animate-on-scroll-debug-green);
			}
		}
	}
}
}

/* Zone Visualization */
[data-zone-overlay] {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	pointer-events: none;
	z-index: 9998;
}

.entry-zone {
	position: absolute;
	left: 0;
	width: 100%;
	pointer-events: none;
	z-index: 9998;
	transition: top 0.2s ease-out, height 0.2s ease-out, background-color 0.3s ease-out;

	/* Red: Not intersecting */
	&--not-intersecting {
		background: linear-gradient(to bottom, var(--wp-block-animate-on-scroll-debug-red-bg), transparent);
	}

	/* Yellow: Entering element zone */
	&--entering {
		background: linear-gradient(to bottom, var(--wp-block-animate-on-scroll-debug-yellow-bg), transparent);
	}

	/* Green: Triggered */
	&--triggered {
		background: linear-gradient(to bottom, var(--wp-block-animate-on-scroll-debug-green-bg), transparent);
	}
}


/* Trigger Line - Enhanced styling */
[data-trigger-line] {
	position: absolute;
	left: 0;
	width: 100%;
	height: 2px;
	pointer-events: none;
	z-index: 9999;
	transition: top 0.1s ease-out, background-color 0.3s ease-out, border-color 0.3s ease-out, box-shadow 0.3s ease-out;

	/* Red: Not intersecting (outside detection boundary) */
	&.trigger-line--not-intersecting {
		background: linear-gradient(to right, transparent, var(--wp-block-animate-on-scroll-debug-red), transparent);
		border-top: 2px solid var(--wp-block-animate-on-scroll-debug-red);
		box-shadow: 0 0 4px var(--wp-block-animate-on-scroll-debug-red-bg);
	}

	/* Yellow: Entering element zone (within detection boundary but below threshold) */
	&.trigger-line--entering {
		background: linear-gradient(to right, transparent, var(--wp-block-animate-on-scroll-debug-yellow), transparent);
		border-top: 2px solid var(--wp-block-animate-on-scroll-debug-yellow);
		box-shadow: 0 0 4px var(--wp-block-animate-on-scroll-debug-yellow-bg);
	}

	/* Green: Triggered (crossed threshold) */
	&.trigger-line--triggered {
		background: linear-gradient(to right, transparent, var(--wp-block-animate-on-scroll-debug-green), transparent);
		border-top: 2px solid var(--wp-block-animate-on-scroll-debug-green);
		box-shadow: 0 0 4px var(--wp-block-animate-on-scroll-debug-green-bg);
	}
}

[data-trigger-label] {
	position: absolute;
	left: 50%;
	transform: translate(-50%, -50%);
	color: rgb(255 255 255);
	padding: 0.25rem 0.5rem;
	border-radius: 0.375rem;
	font-size: 0.75rem;
	font-weight: 600;
	white-space: nowrap;
	pointer-events: none;
	z-index: 10000;
	box-shadow: 0 2px 8px rgb(0 0 0 / 20%);
	transition: top 0.1s ease-out, background-color 0.3s ease-out;

	/* Red: Not intersecting (outside detection boundary) */
	&.trigger-label--not-intersecting {
		background: var(--wp-block-animate-on-scroll-debug-red);
	}

	/* Yellow: Entering element zone (within detection boundary but below threshold) */
	&.trigger-label--entering {
		background: var(--wp-block-animate-on-scroll-debug-yellow);
	}

	/* Green: Triggered (crossed threshold) */
	&.trigger-label--triggered {
		background: var(--wp-block-animate-on-scroll-debug-green);
	}
}

/* Debug Container */
[data-debug-container] {
	position: absolute;
}

/* Mobile Responsive */

@media (width <= 767px) {

	[class*="wp-block-animate-on-scroll-debug-panel"] {
		font-size: 0.8125rem;

		.debug-panel-header {
			padding: 0.625rem 0.75rem;
		}

		.debug-panel-title {
			font-size: 0.8125rem;
		}

		.debug-section-content {
			padding: 0.375rem 0.625rem;
		}

		.debug-metric {
			font-size: 0.75rem;
		}
	}
}
