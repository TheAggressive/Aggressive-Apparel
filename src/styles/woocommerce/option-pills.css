/**
 * Option Pills — Shared Morphing Pill & Swatch Animations
 *
 * Reusable wipe-fill pill buttons and shrink-reveal color swatches
 * used by Quick View and Sticky Add to Cart drawers.
 *
 * Uses `.is-selected` class toggle (JS-managed) for state changes.
 *
 * @package Aggressive_Apparel
 * @since 1.50.0
 */

/* -----------------------------------------------
 * 1. Text pill — wipe fill on select
 * ----------------------------------------------- */

.aggressive-apparel-quick-view__attribute-option,
.aa-sticky-cart__drawer-option {
	position: relative;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding: 0.375rem 0.75rem;
	border: none;
	border-radius: 999px;
	background: transparent;
	color: var(--wp--preset--color--black, #000);
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	cursor: pointer;
	overflow: hidden;
	min-height: 2.75rem; /* 44px WCAG touch target */
	min-width: 2.75rem;
	box-shadow: inset 0 0 0 1px color-mix(in oklch, currentcolor 15%, transparent);
	transition:
		box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
		color 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Wipe fill — slides in from left on select. */
.aggressive-apparel-quick-view__attribute-option::before,
.aa-sticky-cart__drawer-option::before {
	content: "";
	position: absolute;
	inset: 0;
	background: var(--wp--preset--color--black, #000);
	transform: scaleX(0);
	transform-origin: left;
	opacity: 0;
	transition:
		transform 0.35s cubic-bezier(0.4, 0, 0.2, 1),
		opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1);
	z-index: 0;
	border-radius: inherit;
}

.aggressive-apparel-quick-view__attribute-option:hover,
.aa-sticky-cart__drawer-option:hover {
	box-shadow: inset 0 0 0 1px currentcolor;
}

.aggressive-apparel-quick-view__attribute-option:focus-visible,
.aa-sticky-cart__drawer-option:focus-visible {
	outline: 2px solid var(--wp--preset--color--black, #000);
	outline-offset: 2px;
}

.aggressive-apparel-quick-view__attribute-option.is-selected,
.aa-sticky-cart__drawer-option.is-selected {
	box-shadow: inset 0 0 0 1px var(--wp--preset--color--black, #000);
	color: var(--wp--preset--color--white, #fff);
}

.aggressive-apparel-quick-view__attribute-option.is-selected::before,
.aa-sticky-cart__drawer-option.is-selected::before {
	transform: scaleX(1);
	opacity: 1;
}

/* -----------------------------------------------
 * 2. Checkmark icon inside text pills
 * ----------------------------------------------- */

.aggressive-apparel-quick-view__option-check,
.aa-sticky-cart__drawer-option-check {
	position: relative;
	z-index: 1;
	display: flex;
	align-items: center;
	width: 0.75rem;
	margin-right: 0.375rem;
	opacity: 0;
	transform: translateX(-0.5625rem) scale(0);
	transition:
		transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) 0.08s,
		opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.aggressive-apparel-quick-view__option-check svg,
.aa-sticky-cart__drawer-option-check svg {
	width: 0.75rem;
	height: 0.75rem;
	stroke: var(--wp--preset--color--white, #fff);
	stroke-width: 2.5;
	stroke-linecap: round;
	stroke-linejoin: round;
	flex-shrink: 0;
}

.is-selected .aggressive-apparel-quick-view__option-check,
.aa-sticky-cart__drawer-option.is-selected .aa-sticky-cart__drawer-option-check {
	opacity: 1;
	transform: translateX(0) scale(1);
}

/* -----------------------------------------------
 * 3. Label text inside text pills
 * ----------------------------------------------- */

.aggressive-apparel-quick-view__option-name,
.aa-sticky-cart__drawer-option-name {
	position: relative;
	z-index: 1;
	transform: translateX(-0.5625rem);
	transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.is-selected .aggressive-apparel-quick-view__option-name,
.aa-sticky-cart__drawer-option.is-selected .aa-sticky-cart__drawer-option-name {
	transform: translateX(0);
}

/* -----------------------------------------------
 * 4. Color swatch options — shrink-reveal
 * ----------------------------------------------- */

.aggressive-apparel-quick-view__attribute-option.is-color-swatch,
.aa-sticky-cart__drawer-option.is-color-swatch {
	width: 2.75rem;
	height: 2.75rem;
	padding: 0;
	border-radius: 50%;
	border: none;
	box-shadow: inset 0 0 0 1px rgb(0 0 0 / 25%);
	overflow: visible;
	min-width: unset;
	min-height: unset;
	font-size: 0;
	color: transparent;
	transform: scale(1);
	transition:
		transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
		box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1);
}

.aggressive-apparel-quick-view__attribute-option.is-color-swatch::before,
.aa-sticky-cart__drawer-option.is-color-swatch::before {
	display: none;
}

.aggressive-apparel-quick-view__attribute-option.is-color-swatch.is-selected,
.aa-sticky-cart__drawer-option.is-color-swatch.is-selected {
	transform: scale(0.78);
	box-shadow: inset 0 0 0 1px rgb(0 0 0 / 25%);
	outline: 3px solid color-mix(in oklch, var(--swatch-color, rgb(0 0 0 / 40%)) 60%, #000);
	outline-offset: 4px;
	background-color: inherit;
	color: transparent;
}

.aggressive-apparel-quick-view__attribute-option.is-color-swatch:hover:not(.is-selected),
.aa-sticky-cart__drawer-option.is-color-swatch:hover:not(.is-selected) {
	transform: scale(1.1);
	box-shadow: inset 0 0 0 1px rgb(0 0 0 / 25%);
}

.aggressive-apparel-quick-view__attribute-option.is-color-swatch:focus-visible,
.aa-sticky-cart__drawer-option.is-color-swatch:focus-visible {
	outline: 2px solid var(--wp--preset--color--black, #000);
	outline-offset: 3px;
}

.aggressive-apparel-quick-view__attribute-option.is-color-swatch.is-selected:focus-visible,
.aa-sticky-cart__drawer-option.is-color-swatch.is-selected:focus-visible {
	outline-width: 3px;
}

/* -----------------------------------------------
 * 5. Reduced motion
 * ----------------------------------------------- */

@media (prefers-reduced-motion: reduce) {

	.aggressive-apparel-quick-view__attribute-option,
	.aggressive-apparel-quick-view__attribute-option::before,
	.aa-sticky-cart__drawer-option,
	.aa-sticky-cart__drawer-option::before {
		transition: none;
	}

	.aggressive-apparel-quick-view__option-check,
	.aggressive-apparel-quick-view__option-name,
	.aa-sticky-cart__drawer-option-check,
	.aa-sticky-cart__drawer-option-name {
		transition: none;
		transform: none;
	}

	.aggressive-apparel-quick-view__attribute-option.is-color-swatch,
	.aa-sticky-cart__drawer-option.is-color-swatch {
		transition: none;
	}
}
