/**
 * Product Filters
 *
 * Styles for AJAX product filters: drawer, sidebar, and horizontal bar layouts.
 * Includes filter components, skeleton loading, AJAX grid, and active pills.
 *
 * @package Aggressive_Apparel
 * @since 1.22.0
 */

/* ── Custom Properties ──────────────────────────────── */

/* Defined on body so trigger button (in toolbar) and drawer (in wp_footer) inherit them. */
body.has-product-filters {
	--pf-duration: 0.3s;
	--pf-timing: cubic-bezier(0.4, 0, 0.2, 1);
	--pf-sidebar-width: 280px;
	--pf-drawer-width: 340px;
	--pf-swatch-size: 1.75rem;
	--pf-chip-height: 2.25rem;
	--pf-slider-track: 4px;
	--pf-slider-thumb: 1.25rem;
	--pf-bg: var(--wp--preset--color--white, #fff);
	--pf-fg: var(--wp--preset--color--black, #000);
	--pf-accent: var(--wp--preset--color--red, #dc2626);
	--pf-border: rgb(0 0 0 / 12%);
	--pf-hover: rgb(0 0 0 / 6%);
	--pf-muted: rgb(0 0 0 / 40%);
}

/* ── Filter Trigger Button ──────────────────────────── */

.aa-product-filters__trigger {
	display: inline-flex;
	align-items: center;
	gap: 0.5rem;
	padding: 0.5rem 1rem;
	border: 1px solid var(--pf-border);
	background: var(--pf-bg);
	color: var(--pf-fg);
	font-size: 0.8rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	cursor: pointer;
	transition: border-color var(--pf-duration) var(--pf-timing);
	min-height: 2.75rem;

	&:hover {
		border-color: var(--pf-fg);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

.aa-product-filters__trigger-count {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 1.25rem;
	height: 1.25rem;
	padding: 0 0.25rem;
	font-size: 0.75rem;
	font-weight: 700;
	background: var(--pf-fg);
	color: var(--pf-bg);
	border-radius: 999px;

	&[hidden] {
		display: none;
	}
}

/* Mobile-only trigger for sidebar/horizontal layouts. */
.aa-product-filters__trigger--mobile-only {
	display: none;
}

@media (width <= 1024px) {

	.aa-product-filters__trigger--mobile-only {
		display: inline-flex;
	}
}

/* ── Drawer Overlay ─────────────────────────────────── */

.aa-product-filters__drawer {
	position: fixed;
	inset: 0;
	z-index: 100000;
	display: flex;

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__drawer-backdrop {
	position: absolute;
	inset: 0;
	background-color: rgb(0 0 0 / 0%);
	backdrop-filter: blur(0);
	transition:
		background-color var(--pf-duration) var(--pf-timing),
		backdrop-filter var(--pf-duration) var(--pf-timing);

	.is-open & {
		background-color: rgb(0 0 0 / 50%);
		backdrop-filter: blur(4px);
	}
}

.aa-product-filters__drawer-panel {
	position: relative;
	width: var(--pf-drawer-width);
	max-width: 90vw;
	height: 100dvh;
	background-color: var(--pf-bg);
	color: var(--pf-fg);
	display: flex;
	flex-direction: column;
	transform: translateX(-100%);
	transition: transform var(--pf-duration) var(--pf-timing);
	box-shadow: 4px 0 24px rgb(0 0 0 / 10%);
	z-index: 1;

	.is-open & {
		transform: translateX(0);
	}
}

.aa-product-filters__drawer-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 1rem 1.25rem;
	border-bottom: 1px solid var(--pf-border);
	flex-shrink: 0;
}

.aa-product-filters__drawer-title {
	font-size: 0.85rem;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	margin: 0;
}

.aa-product-filters__close {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 2.75rem;
	height: 2.75rem;
	border: none;
	background: none;
	color: var(--pf-fg);
	cursor: pointer;
	border-radius: 50%;
	transition: background-color 0.15s ease;

	&:hover {
		background-color: var(--pf-hover);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: -2px;
	}
}

.aa-product-filters__drawer-body {
	flex: 1;
	overflow-y: auto;
	overscroll-behavior: contain;
	padding: 0.5rem 0;
}

.aa-product-filters__drawer-footer {
	display: flex;
	gap: 0.75rem;
	padding: 1rem 1.25rem;
	border-top: 1px solid var(--pf-border);
	flex-shrink: 0;
}

/* ── @starting-style for drawer entry ───────────────── */

@supports selector(@starting-style) {

	.aa-product-filters__drawer {
		transition: display var(--pf-duration) allow-discrete;
	}

	@starting-style {

		.aa-product-filters__drawer.is-open .aa-product-filters__drawer-panel {
			transform: translateX(-100%);
		}

		.aa-product-filters__drawer.is-open .aa-product-filters__drawer-backdrop {
			background-color: rgb(0 0 0 / 0%);
			backdrop-filter: blur(0);
		}
	}
}

/* ── Reduced Motion ─────────────────────────────────── */

@media (prefers-reduced-motion: reduce) {

	.aa-product-filters__drawer-backdrop,
	.aa-product-filters__drawer-panel,
	.aa-product-filters__trigger,
	.aa-product-filters__section-icon,
	.aa-product-filters__color-swatch,
	.aa-product-filters__size-chip,
	.aa-product-filters__stock-switch,
	.aa-product-filters__stock-switch::after,
	.aa-product-filters__apply-btn,
	.aa-product-filters__clear-btn,
	.aa-product-filters__pill,
	.aa-product-filters__page-btn,
	.aa-product-filters__bar-trigger,
	.aa-product-filters__bar-trigger svg,
	.aa-product-filters__product-image {
		transition: none;
		backdrop-filter: none;
	}

	.aa-product-filters__category-chip,
	.aa-product-filters__category-chip::before,
	.aa-product-filters__category-chip-check,
	.aa-product-filters__category-chip-name,
	.aa-product-filters__category-chip-count {
		transition: none;
	}

	.aa-product-filters__category-chip-check,
	.aa-product-filters__category-chip-name,
	.aa-product-filters__category-chip-count {
		transform: none;
	}

	.aa-product-filters__skeleton-image,
	.aa-product-filters__skeleton-title,
	.aa-product-filters__skeleton-price {
		animation: none;
	}
}

/* ── Filter Sections (shared) ───────────────────────── */

.aa-product-filters__section {
	border-bottom: 1px solid var(--pf-border);
}

.aa-product-filters__section-toggle {
	display: flex;
	align-items: center;
	justify-content: space-between;
	width: 100%;
	padding: 0.875rem 1.25rem;
	border: none;
	background: none;
	color: var(--pf-fg);
	cursor: pointer;
	text-align: left;
	min-height: 2.75rem;

	&:hover {
		background-color: var(--pf-hover);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: -2px;
	}
}

.aa-product-filters__section-title {
	font-size: 0.8rem;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.04em;
}

.aa-product-filters__section-icon {
	transition: transform 0.2s ease;

	[aria-expanded="false"] & {
		transform: rotate(-90deg);
	}
}

.aa-product-filters__section-body {
	padding: 0 1.25rem 1rem;

	[aria-expanded="false"] + & {
		display: none;
	}
}

/* ── Categories (Morphing Chips) ────────────────────── */

.aa-product-filters__category-list {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	flex-wrap: wrap;
	gap: 0.375rem;

	&--children {
		padding-left: 0;
		margin-top: 0.375rem;
	}
}

.aa-product-filters__category-item {
	margin: 0;
}

.aa-product-filters__category-chip {
	position: relative;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding: 0.375rem 0.75rem;
	border: none;
	border-radius: 999px;
	background: transparent;
	color: var(--pf-fg);
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	cursor: pointer;
	overflow: hidden;
	min-height: 2.25rem;
	box-shadow: inset 0 0 0 1px var(--pf-border);
	transition:
		box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
		color 0.35s cubic-bezier(0.4, 0, 0.2, 1);

	/* Wipe fill — slides in from left on select. */
	&::before {
		content: "";
		position: absolute;
		inset: 0;
		background: var(--pf-fg);
		transform: scaleX(0);
		transform-origin: left;
		transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
		z-index: 0;
		border-radius: inherit;
	}

	&:hover {
		box-shadow: inset 0 0 0 1px var(--pf-fg);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}

	&.is-selected {
		box-shadow: inset 0 0 0 1px var(--pf-fg);
		color: var(--pf-bg);

		&::before {
			transform: scaleX(1);
		}
	}
}

/*
 * Checkmark + text slide animation (no layout shift).
 *
 * The checkmark space (0.75rem + 0.375rem gap) is always allocated so the chip
 * never changes width. In the default state every child is shifted left by half
 * that reserved space (0.5625rem) so text appears centred. On select,
 * translateX transitions to 0 — the text slides right and the checkmark
 * bounces in. Only transforms + opacity animate → zero layout recalc.
 */
.aa-product-filters__category-chip-check {
	position: relative;
	z-index: 1;
	display: flex;
	align-items: center;
	width: 0.75rem;
	margin-right: 0.375rem;
	opacity: 0;
	transform: translateX(-0.5625rem) scale(0);
	transition:
		transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) 0.08s,
		opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);

	svg {
		width: 0.75rem;
		height: 0.75rem;
		stroke: var(--pf-bg);
		stroke-width: 2.5;
		stroke-linecap: round;
		stroke-linejoin: round;
		flex-shrink: 0;
	}

	.is-selected & {
		opacity: 1;
		transform: translateX(0) scale(1);
	}
}

.aa-product-filters__category-chip-name {
	position: relative;
	z-index: 1;
	transform: translateX(-0.5625rem);
	transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);

	.is-selected & {
		transform: translateX(0);
	}
}

.aa-product-filters__category-chip-count {
	position: relative;
	z-index: 1;
	margin-left: 0.375rem;
	font-size: 0.625rem;
	opacity: 0.5;
	font-weight: 500;
	transform: translateX(-0.5625rem);
	transition:
		transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
		opacity 0.2s ease;

	.is-selected & {
		opacity: 0.7;
		transform: translateX(0);
	}
}

/* ── Filter Enter / Exit Animations ────────────────── */

/*
 * Staggered cascade for color swatches and size chips when categories
 * change. JS adds/removes these classes with per-element delays.
 *
 *   .is-filter-exiting  → shrink + fade out (applied, then element hidden)
 *   .is-filter-entering → starting state (scale 0, opacity 0), removed on
 *                          next frame so the element transitions to defaults.
 */
.is-filter-exiting {
	opacity: 0 !important;
	transform: scale(0) !important;
}

.is-filter-entering {
	opacity: 0 !important;
	transform: scale(0) !important;
}

/* ── Color Swatches ─────────────────────────────────── */

.aa-product-filters__color-list {
	display: flex;
	flex-wrap: wrap;
	gap: 0.5rem;
}

/*
 * Shrink-reveal color swatches.
 *
 * On select the swatch scales down to reveal a darker-shade frame created with
 * color-mix(). Three stacked box-shadows build the ring:
 *   1. inset border  — subtle inner definition
 *   2. page-bg gap   — contrast ring (page background shows through)
 *   3. darker frame  — color-mix() of the swatch color + 40% black
 *
 * White swatches: frame becomes gray, gap invisible → clean gray outline.
 * Black swatches: frame is black, gap is white → white ring provides contrast.
 * Patterns: fallback to --pf-muted when --swatch-color isn't set.
 */
.aa-product-filters__color-swatch {
	width: var(--pf-swatch-size);
	height: var(--pf-swatch-size);
	border-radius: 50%;
	border: none;
	box-shadow: inset 0 0 0 1px rgb(0 0 0 / 25%);
	cursor: pointer;
	padding: 0;
	outline-offset: 2px;
	position: relative;
	transform: scale(1);
	transition:
		transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1),
		opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1),
		box-shadow 0.35s cubic-bezier(0.4, 0, 0.2, 1);

	&.is-selected {
		transform: scale(0.78);
		box-shadow:
			inset 0 0 0 1px rgb(0 0 0 / 25%),
			0 0 0 4px var(--pf-bg),
			0 0 0 7px color-mix(in oklch, var(--swatch-color, var(--pf-muted)) 60%, #000);
	}

	&:hover:not(.is-selected) {
		transform: scale(1.1);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
	}
}

/* ── Size Chips ─────────────────────────────────────── */

.aa-product-filters__size-list {
	display: flex;
	flex-wrap: wrap;
	gap: 0.375rem;
}

.aa-product-filters__size-chip {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	min-width: 2.75rem;
	height: var(--pf-chip-height);
	padding: 0 0.625rem;
	border: 1px solid var(--pf-border);
	background: transparent;
	color: var(--pf-fg);
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	cursor: pointer;
	transition:
		background-color 0.15s ease,
		color 0.15s ease,
		border-color 0.15s ease,
		transform 0.25s cubic-bezier(0.4, 0, 0.2, 1),
		opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1);

	&:hover {
		border-color: var(--pf-fg);
	}

	&.is-selected {
		background-color: var(--pf-fg);
		color: var(--pf-bg);
		border-color: var(--pf-fg);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

/* ── Price Range Slider ─────────────────────────────── */

.aa-product-filters__price-slider {
	position: relative;
	padding-top: var(--pf-slider-thumb);
	margin: 0.75rem 0;
}

.aa-product-filters__price-track {
	position: absolute;
	top: calc(var(--pf-slider-thumb) / 2);
	left: 0;
	right: 0;
	height: var(--pf-slider-track);
	transform: translateY(-50%);
	background: var(--pf-border);
	border-radius: 999px;
}

.aa-product-filters__price-range {
	position: absolute;
	inset: 0;
	background: var(--pf-fg);
	border-radius: 999px;
}

.aa-product-filters__price-thumb {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: var(--pf-slider-thumb);
	appearance: none;
	background: transparent;
	pointer-events: none;
	margin: 0;

	&::-webkit-slider-runnable-track {
		height: 100%;
		background: transparent;
	}

	&::-webkit-slider-thumb {
		appearance: none;
		width: var(--pf-slider-thumb);
		height: var(--pf-slider-thumb);
		border-radius: 50%;
		background: var(--pf-fg);
		border: 2px solid var(--pf-bg);
		box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
		pointer-events: all;
		cursor: grab;
		position: relative;
		z-index: 1;
	}

	&::-moz-range-track {
		height: 100%;
		background: transparent;
		border: none;
	}

	&::-moz-range-thumb {
		width: var(--pf-slider-thumb);
		height: var(--pf-slider-thumb);
		border-radius: 50%;
		background: var(--pf-fg);
		border: 2px solid var(--pf-bg);
		box-shadow: 0 1px 3px rgb(0 0 0 / 20%);
		pointer-events: all;
		cursor: grab;
	}

	&:active::-webkit-slider-thumb {
		cursor: grabbing;
	}

	&:active::-moz-range-thumb {
		cursor: grabbing;
	}
}

.aa-product-filters__price-labels {
	display: flex;
	justify-content: space-between;
	margin-top: 0.5rem;
}

.aa-product-filters__price-label {
	font-size: 0.75rem;
	font-weight: 600;
}

/* ── Stock Status Toggle ────────────────────────────── */

.aa-product-filters__stock-toggle {
	display: flex;
	align-items: center;
	justify-content: space-between;
	cursor: pointer;
	min-height: 2.75rem;
}

.aa-product-filters__stock-label {
	font-size: 0.8rem;
}

.aa-product-filters__stock-checkbox {
	position: absolute;
	opacity: 0;
	width: 0;
	height: 0;
}

.aa-product-filters__stock-switch {
	position: relative;
	width: 2.5rem;
	height: 1.375rem;
	background: var(--pf-border);
	border-radius: 999px;
	transition: background-color 0.2s ease;
	flex-shrink: 0;

	&::after {
		content: "";
		position: absolute;
		top: 2px;
		left: 2px;
		width: 1.125rem;
		height: 1.125rem;
		background: var(--pf-bg);
		border-radius: 50%;
		box-shadow: 0 1px 3px rgb(0 0 0 / 15%);
		transition: transform 0.2s ease;
	}

	.aa-product-filters__stock-checkbox:checked + & {
		background: var(--pf-fg);

		&::after {
			transform: translateX(1.125rem);
		}
	}

	.aa-product-filters__stock-checkbox:focus-visible + & {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

/* ── Buttons (Apply / Clear) ────────────────────────── */

.aa-product-filters__apply-btn {
	flex: 1;
	padding: 0.75rem 1.25rem;
	background: var(--pf-fg);
	color: var(--pf-bg);
	border: none;
	font-size: 0.8rem;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	cursor: pointer;
	min-height: 2.75rem;
	transition: opacity 0.15s ease;

	&:hover {
		opacity: 0.85;
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

.aa-product-filters__clear-btn {
	padding: 0.75rem 1.25rem;
	background: transparent;
	color: var(--pf-fg);
	border: 1px solid var(--pf-border);
	font-size: 0.8rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	cursor: pointer;
	min-height: 2.75rem;
	transition: border-color 0.15s ease;

	&:hover {
		border-color: var(--pf-fg);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__clear-btn--sidebar {
	width: 100%;
	margin-top: 1rem;
}

/* ── Active Filter Pills ────────────────────────────── */

.aa-product-filters__active-bar {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	gap: 0.5rem;
	padding: 0.75rem 0;

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__pills {
	display: flex;
	flex-wrap: wrap;
	gap: 0.375rem;
	flex: 1;
}

.aa-product-filters__pill {
	display: inline-flex;
	align-items: center;
	gap: 0.375rem;
	padding: 0.375rem 0.625rem;
	border: 1px solid var(--pf-border);
	background: transparent;
	color: var(--pf-fg);
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	cursor: pointer;
	transition: background-color 0.15s ease;
	min-height: 2.75rem;

	&:hover {
		background-color: var(--pf-hover);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

.aa-product-filters__pill-x {
	font-size: 0.85rem;
	line-height: 1;
	opacity: 0.5;
}

.aa-product-filters__clear-all {
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	text-decoration: underline;
	text-underline-offset: 2px;
	color: var(--pf-fg);
	background: none;
	border: none;
	cursor: pointer;
	padding: 0.375rem;
	min-height: 2.75rem;

	&:hover {
		opacity: 0.7;
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

/* ── AJAX Product Grid ──────────────────────────────── */

.aa-product-filters__ajax-grid {

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__products {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: var(--wp--preset--spacing--5, 1.25rem);

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__product-card {
	display: flex;
	flex-direction: column;
}

.aa-product-filters__product-link {
	display: block;
	overflow: hidden;
}

.aa-product-filters__product-image {
	width: 100%;
	height: auto;
	aspect-ratio: 1;
	object-fit: cover;
	display: block;
	transition: transform 0.3s ease;

	.aa-product-filters__product-link:hover & {
		transform: scale(1.03);
	}
}

.aa-product-filters__product-title {
	font-size: 0.875rem;
	font-weight: 400;
	margin: 0.75rem 0 0;
	text-align: left;

	a {
		color: inherit;
		text-decoration: none;

		&:hover {
			text-decoration: underline;
		}
	}
}

.aa-product-filters__product-price {
	font-size: 0.875rem;
	margin-top: 0.25rem;
	text-align: left;

	del {
		opacity: 0.5;
		margin-right: 0.25rem;
	}

	ins {
		text-decoration: none;
		font-weight: 600;
		color: var(--pf-accent);
	}
}

@media (width <= 768px) {

	.aa-product-filters__products {
		grid-template-columns: repeat(2, 1fr);
	}
}

/* ── Skeleton Loading ───────────────────────────────── */

.aa-product-filters__skeleton {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: var(--wp--preset--spacing--5, 1.25rem);

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__skeleton-card {
	display: flex;
	flex-direction: column;
}

.aa-product-filters__skeleton-image {
	aspect-ratio: 1;
	background: linear-gradient(90deg, var(--pf-border) 25%, rgb(0 0 0 / 6%) 50%, var(--pf-border) 75%);
	background-size: 200% 100%;
	animation: aa-skeleton-pulse 1.5s ease-in-out infinite;
}

.aa-product-filters__skeleton-title {
	height: 0.875rem;
	width: 75%;
	margin-top: 0.75rem;
	background: var(--pf-border);
	animation: aa-skeleton-pulse 1.5s ease-in-out infinite;
	animation-delay: 0.1s;
}

.aa-product-filters__skeleton-price {
	height: 0.875rem;
	width: 40%;
	margin-top: 0.375rem;
	background: var(--pf-border);
	animation: aa-skeleton-pulse 1.5s ease-in-out infinite;
	animation-delay: 0.2s;
}

@keyframes aa-skeleton-pulse {

	0% { background-position: 200% 0; }

	100% { background-position: -200% 0; }
}

@media (width <= 768px) {

	.aa-product-filters__skeleton {
		grid-template-columns: repeat(2, 1fr);
	}
}

/* ── No Results ─────────────────────────────────────── */

.aa-product-filters__no-results {
	text-align: center;
	padding: 3rem 1rem;
	color: var(--pf-muted);

	&[hidden] {
		display: none;
	}
}

/* ── Pagination ─────────────────────────────────────── */

.aa-product-filters__pagination {
	display: flex;
	justify-content: center;
	gap: 0.25rem;
	padding: 2rem 0;

	&[hidden] {
		display: none;
	}
}

.aa-product-filters__page-btn {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 2.75rem;
	height: 2.75rem;
	border: 1px solid var(--pf-border);
	background: transparent;
	color: var(--pf-fg);
	font-size: 0.8rem;
	font-weight: 600;
	cursor: pointer;
	transition: background-color 0.15s ease, border-color 0.15s ease;

	&:hover {
		border-color: var(--pf-fg);
	}

	&.is-current {
		background: var(--pf-fg);
		color: var(--pf-bg);
		border-color: var(--pf-fg);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}
}

/* ── Screen Reader Text ─────────────────────────────── */

.aa-product-filters__announcer {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip-path: inset(50%);
	white-space: nowrap;
	border: 0;
}

/* ── Sidebar Layout ─────────────────────────────────── */

.aa-product-filters__grid-wrapper--sidebar {
	display: grid;
	grid-template-columns: var(--pf-sidebar-width) 1fr;
	gap: var(--wp--preset--spacing--6, 1.5rem);
	align-items: start;
}

.aa-product-filters__sidebar {
	position: sticky;
	top: var(--wp--preset--spacing--4, 1rem);
	max-height: calc(100vh - 2rem);
	overflow-y: auto;
	overscroll-behavior: contain;
	border: 1px solid var(--pf-border);
}

.aa-product-filters__sidebar-inner {
	padding-bottom: 0.5rem;
}

@media (width <= 1024px) {

	.aa-product-filters__grid-wrapper--sidebar {
		display: block;
	}

	.aa-product-filters__sidebar {
		display: none;
	}
}

/* ── Horizontal Bar Layout ──────────────────────────── */

.aa-product-filters__bar {
	display: flex;
	flex-wrap: wrap;
	gap: 0.5rem;
	padding: 0.75rem 0;
	border-bottom: 1px solid var(--pf-border);
	margin-bottom: 1rem;
}

.aa-product-filters__bar-item {
	position: relative;
}

.aa-product-filters__bar-trigger {
	display: inline-flex;
	align-items: center;
	gap: 0.375rem;
	padding: 0.5rem 0.75rem;
	border: 1px solid var(--pf-border);
	background: transparent;
	color: var(--pf-fg);
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	cursor: pointer;
	min-height: 2.75rem;
	transition: border-color 0.15s ease;

	&:hover,
	&[aria-expanded="true"] {
		border-color: var(--pf-fg);
	}

	&:focus-visible {
		outline: 2px solid var(--pf-fg);
		outline-offset: 2px;
	}

	svg {
		transition: transform 0.2s ease;
	}

	&[aria-expanded="true"] svg {
		transform: rotate(180deg);
	}
}

.aa-product-filters__bar-dropdown {
	position: absolute;
	top: 100%;
	left: 0;
	z-index: 10;
	min-width: 220px;
	max-height: 320px;
	overflow-y: auto;
	background: var(--pf-bg);
	border: 1px solid var(--pf-border);
	box-shadow: 0 4px 16px rgb(0 0 0 / 10%);
	padding: 0.75rem;
	margin-top: 0.25rem;

	&[hidden] {
		display: none;
	}
}

@media (width <= 1024px) {

	.aa-product-filters__bar {
		display: none;
	}
}

/* ── SSR Grid Hidden State ──────────────────────────── */

.aa-product-filters__ssr-grid[hidden] {
	display: none;
}
